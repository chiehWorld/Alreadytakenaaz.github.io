---
layout:     post
title:      "MongoDB 查询文档"
subtitle:   "归档于：技术"
date:       2026-01-22
author:     Chieh
header-img: assets/MongoDB-查询文档_header.jpg
catalog: true
tags:
    - HTML ASCII 字符集
    - MongoDB 查询文档
    - 技术
    - HTML 拾色器
---

# MongoDB 查询文档

MongoDB 查询文档使用 find()、findOne() 方法。

find() 方法以非结构化的方式来显示所有文档。

### 语法

MongoDB 查询数据的语法格式如下：

```
db.collection.find(query, projection)
```


* query ：用于查找文档的查询条件。默认为 {} ，即匹配所有文档。\n ：用于查找文档的查询条件。默认为 ，即匹配所有文档。
* projection（可选）：指定返回结果中包含或排除的字段。

查找所有文档：

## 实例

```
db.
```


myCollection

.

find

(

)

;

\n

按条件查找文档：

## 实例

```
db.
```


myCollection

.

find

(

{

age

:

{

$gt

:

25

}

}

)

;

\n

按条件查找文档，并只返回指定字段：

## 实例

```
db.
```


myCollection

.

find

(

\n

{

age

:

{

$gt

:

25

}

}

,

\n

{

name

:

1

,

age

:

1

,

\_id

:

0

}

\n

)

;

\n

如果你需要以易读的方式来读取数据，可以使用 pretty() 方法，语法格式如下：

```
>db.col.find().pretty()
```


pretty() 方法以格式化的方式来显示所有文档。

## 实例

```
db.
```


col

.

find

(

)

.

pretty

(

)

\n

{

\n

"\_id"

:

ObjectId

(

"56063f17ade2f21f36b03133"

)

,

\n

"title"

:

"MongoDB 教程"

,

\n

"description"

:

"MongoDB 是一个 Nosql 数据库"

,

\n

"by"

:

"菜鸟教程"

,

\n

"url"

:

"http://www.runoob.com"

,

\n

"tags"

:

[

\n

"mongodb"

,

\n

"database"

,

\n

"NoSQL"

\n

]

,

\n

"likes"

:

100

\n

}

\n

### 2、findOne()

findOne() 方法用于查找集合中的单个文档。如果找到多个匹配的文档，它只返回第一个。

语法：

```
db.collection.findOne(query, projection)
```


* query ：用于查找文档的查询条件。默认为 {} ，即匹配所有文档。\n ：用于查找文档的查询条件。默认为 ，即匹配所有文档。
* projection（可选）：指定返回结果中包含或排除的字段。

查找单个文档：

```
db.myCollection.findOne({ name: "Alice" });
```


查找单个文档，并只返回指定字段：

```
db.myCollection.findOne(
    { name: "Alice" },
    { name: 1, age: 1, _id: 0 }
);
```


## 高级查询方法

### 1、使用比较操作符

查找单个文档，并只返回指定字段：

MongoDB 支持多种比较操作符，如 $gt、$lt、$gte、$lte、$eq、$ne 等。

查找年龄大于 25 的文档:

```
db.myCollection.find({ age: { $gt: 25 } });
```


### 2、使用逻辑操作符

MongoDB 支持多种逻辑操作符，如 $and、$or、$not、$nor 等。

查找年龄大于 25 且城市为 "New York" 的文档:

## 实例

```
db.
```


myCollection

.

find

(

{

\n
    $and

:

[

\n

{

age

:

{

$gt

:

25

}

}

,

\n

{

city

:

"New York"

}

\n

]

\n

}

)

;

\n

### 3、使用正则表达式

可以使用正则表达式进行模式匹配查询。

查找名字以 "A" 开头的文档：

```
db.myCollection.find({ name: /^A/ });
```


### 4、投影

投影用于控制查询结果中返回的字段。可以使用包含字段和排除字段两种方式。

只返回名字和年龄字段：

## 实例

```
db.
```


myCollection

.

find

(

\n

{

age

:

{

$gt

:

25

}

}

,

\n

{

name

:

1

,

age

:

1

,

\_id

:

0

}

\n

)

;

\n

### 5、排序

可以对查询结果进行排序。

按年龄降序排序：

```
db.myCollection.find().sort({ age: -1 });
```


### 6、限制与跳过

可以对查询结果进行限制和跳过指定数量的文档。

返回前 10 个文档：

```
db.myCollection.find().limit(10);
```


跳过前 5 个文档，返回接下来的 10 个文档：

```
db.myCollection.find().skip(5).limit(10);
```


### 实例

查找年龄大于 25 且城市为 "New York" 的文档，只返回名字和年龄字段，按年龄降序排序，并返回前 10 个文档。

## 实例

```
db.
```


myCollection

.

find

(

\n

{

\n
        $and

:

[

\n

{

age

:

{

$gt

:

25

}

}

,

\n

{

city

:

"New York"

}

\n

]

\n

}

,

\n

{

name

:

1

,

age

:

1

,

\_id

:

0

}

\n

)

.

sort

(

{

age

:

-

1

}

)

.

limit

(

10

)

;

\n

## MongoDB 与 RDBMS Where 语句比较

如果你熟悉常规的 SQL 数据，通过下表可以更好的理解 MongoDB 的条件语句查询：

| 操作 | 格式 | 范例 | RDBMS中的类似语句 |
| --- | --- | --- | --- |
| 等于 | `{<key>:<value>`} | `db.col.find({"by":"菜鸟教程"}).pretty()` | `where by = '菜鸟教程'` |
| 小于 | `{<key>:{$lt:<value>}}` | `db.col.find({"likes":{$lt:50}}).pretty()` | `where likes < 50` |
| 小于或等于 | `{<key>:{$lte:<value>}}` | `db.col.find({"likes":{$lte:50}}).pretty()` | `where likes <= 50` |
| 大于 | `{<key>:{$gt:<value>}}` | `db.col.find({"likes":{$gt:50}}).pretty()` | `where likes > 50` |
| 大于或等于 | `{<key>:{$gte:<value>}}` | `db.col.find({"likes":{$gte:50}}).pretty()` | `where likes >= 50` |
| 不等于 | `{<key>:{$ne:<value>}}` | `db.col.find({"likes":{$ne:50}}).pretty()` | `where likes != 50` |

## MongoDB AND 条件

MongoDB 的 find() 方法可以传入多个键(key)，每个键(key)以逗号隔开，即常规 SQL 的 AND 条件。

语法格式如下：

```
>db.col.find({key1:value1, key2:value2}).pretty()
```


### 实例

以下实例通过 by 和 title 键来查询 菜鸟教程 中 MongoDB 教程 的数据

```
> db.col.find({"by":"菜鸟教程", "title":"MongoDB 教程"}).pretty()
{
        "_id" : ObjectId("56063f17ade2f21f36b03133"),
        "title" : "MongoDB 教程",
        "description" : "MongoDB 是一个 Nosql 数据库",
        "by" : "菜鸟教程",
        "url" : "http://www.runoob.com",
        "tags" : [
                "mongodb",
                "database",
                "NoSQL"
        ],
        "likes" : 100
}
```


以上实例中类似于 WHERE 语句：WHERE by='菜鸟教程' AND title='MongoDB 教程'

## MongoDB OR 条件

MongoDB OR 条件语句使用了关键字 $or,语法格式如下：

```
>db.col.find(
   {
      $or: [
         {key1: value1}, {key2:value2}
      ]
   }
).pretty()
```


### 实例

以下实例中，我们演示了查询键 by 值为 菜鸟教程 或键 title 值为 MongoDB 教程 的文档。

```
>db.col.find({$or:[{"by":"菜鸟教程"},{"title": "MongoDB 教程"}]}).pretty()
{
        "_id" : ObjectId("56063f17ade2f21f36b03133"),
        "title" : "MongoDB 教程",
        "description" : "MongoDB 是一个 Nosql 数据库",
        "by" : "菜鸟教程",
        "url" : "http://www.runoob.com",
        "tags" : [
                "mongodb",
                "database",
                "NoSQL"
        ],
        "likes" : 100
}
>
```


## AND 和 OR 联合使用

以下实例演示了 AND 和 OR 联合使用，类似常规 SQL 语句为：
'where likes>50 AND (by = '菜鸟教程' OR title = 'MongoDB 教程')'

```
>db.col.find({"likes": {$gt:50}, $or: [{"by": "菜鸟教程"},{"title": "MongoDB 教程"}]}).pretty()
{
        "_id" : ObjectId("56063f17ade2f21f36b03133"),
        "title" : "MongoDB 教程",
        "description" : "MongoDB 是一个 Nosql 数据库",
        "by" : "菜鸟教程",
        "url" : "http://www.runoob.com",
        "tags" : [
                "mongodb",
                "database",
                "NoSQL"
        ],
        "likes" : 100
}
```

---
> 参考链接：[https://www.runoob.com/mongodb/mongodb-query.html](https://www.runoob.com/mongodb/mongodb-query.html)
